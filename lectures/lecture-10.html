<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лекция №10 - Понятие прерывания</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <h1>Лекции по операционным системам</h1>
        <nav>
            <ul>
                <li><a href="../index.html">Главная</a></li>
                <li><a href="lecture-10-answers.html">Ответы на вопросы</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <a href="../index.html" class="back-link">← Назад к списку лекций</a>
        
        <div class="lecture-content">
            <h2 class="lecture-title">Лекция №10: Понятие прерывания. Последовательность действий при обработке прерываний. Классы прерываний. Рабочая область прерываний</h2>
            
            <div class="lecture-section">
                <h3>Понятие прерывания</h3>
                <p>Прерывания – механизм, позволяющий координировать параллельное функционирование отдельных устройств вычислительной системы и реагировать на особые состояния, возникающие при работе процессора.</p>
                
                <p>Это принудительная передача управления от выполняемой программы к системе (а через нее – к соответствующей программе обработки прерывания), происходящая при возникновении определенного события.</p>
                
                <p>Основная цель введения прерываний — реализация асинхронного режима работы и распараллеливание работы отдельных устройств вычислительного комплекса.</p>
                
                <p>Механизм прерываний реализуется аппаратно-программными средствами.</p>
            </div>
            
            <div class="lecture-section">
                <h3>Последовательность действий при обработке прерываний</h3>
                
                <p>Когда возникает прерывание, процессор должен выполнить несколько последовательных шагов:</p>
                
                <ol>
                    <li><strong>Определение приоритета прерывания:</strong> Прерывания могут иметь разный приоритет. Если несколько прерываний происходят одновременно, процессор должен решить, какое из них обработать в первую очередь.</li>
                    
                    <li><strong>Сохранение состояния процессора:</strong> Прежде чем переключиться на обработку прерывания, процессор должен сохранить информацию о текущем состоянии выполнения программы (содержимое регистров, флаги состояния и указатель программы).</li>
                    
                    <li><strong>Переход в режим обработки прерывания:</strong> Процессор переключается в специальный режим, предназначенный для обработки прерываний.</li>
                    
                    <li><strong>Выполнение обработчика прерывания:</strong> Обработчик прерывания — это специализированная часть кода, которая выполняется для решения проблемы, вызвавшей прерывание.</li>
                    
                    <li><strong>Возврат к обработке основной программы:</strong> После завершения работы обработчика прерывания процессор восстанавливает сохраненное состояние и продолжает выполнение основной программы с того места, где оно было прервано.</li>
                </ol>
                
                <p>Главные функции механизма прерываний:</p>
                <ul>
                    <li>распознавание или классификация прерываний</li>
                    <li>передача управления соответственно обработчику прерываний</li>
                    <li>корректное возвращение к прерванной программе</li>
                </ul>
            </div>
            
            <div class="lecture-section">
                <h3>Классы прерываний</h3>
                
                <h4>1. Аппаратные (асинхронные или внешние) прерывания (Hardware Interrupts)</h4>
                <p>Эти прерывания возникают от аппаратных устройств, таких как клавиатура, мышь, сетевые адаптеры или внешние устройства.</p>
                
                <p>Аппаратные прерывания могут быть вызваны различными событиями:</p>
                <ul>
                    <li>Запрос на чтение/запись данных с устройства</li>
                    <li>Ошибки оборудования (например, сбой жесткого диска)</li>
                    <li>Таймеры (например, срабатывание системного таймера)</li>
                </ul>
                
                <h4>2. Программные (синхронные или внутренние) прерывания (Software Interrupts)</h4>
                <p>Программные прерывания возникают в результате выполнения программного кода, а не внешних событий.</p>
                
                <p>Программные прерывания могут быть вызваны:</p>
                <ul>
                    <li>Ошибками в программе (например, деление на ноль, выход за пределы массива)</li>
                    <li>Системными вызовами, когда программа просит операционную систему выполнить какие-то действия (например, ввод/вывод, выделение памяти)</li>
                </ul>
                
                <h4>3. Прерывания от исключений (Exceptions)</h4>
                <p>Исключения представляют собой особый вид прерываний, которые возникают в случае ошибок выполнения программы, таких как:</p>
                <ul>
                    <li>Деление на ноль</li>
                    <li>Нарушение прав доступа к памяти (например, попытка записи в защищенную область памяти)</li>
                    <li>Невозможно выполнить инструкцию, так как она не поддерживается процессором</li>
                </ul>
                
                <h4>4. Прерывания от внешних событий (External Interrupts)</h4>
                <p>Эти прерывания возникают от внешних факторов, например, сигналов от внешних устройств. Это может быть прерывание от клавиатуры или других периферийных устройств.</p>
            </div>
            
            <div class="lecture-section">
                <h3>Рабочая область прерываний</h3>
                <p>Рабочая область прерываний (или контекст прерывания) — это область памяти, где хранятся данные, необходимые для восстановления состояния программы после обработки прерывания.</p>
                
                <p>Рабочая область прерываний включает в себя:</p>
                <ul>
                    <li>Сохраненные регистры процессора — для того чтобы можно было восстановить текущее состояние выполнения программы после обработки прерывания</li>
                    <li>Флаги и другие параметры состояния процессора — чтобы можно было точно восстановить состояние флагов и других вспомогательных данных</li>
                    <li>Местоположение обработки прерывания — это может быть указатель на специальную таблицу обработки прерываний (например, в современных системах используется таблица прерываний)</li>
                </ul>
                
                <p>Каждое прерывание требует выделения определенной рабочей области, которая будет использоваться для хранения контекста текущего выполнения.</p>
            </div>
            
            <div class="lecture-section">
                <h3>Пример обработки прерываний в процессоре</h3>
                <p>Для иллюстрации, рассмотрим процесс обработки прерывания на примере работы процессора x86:</p>
                
                <ol>
                    <li>Процессор получает сигнал от устройства ввода/вывода (например, клавиатуры)</li>
                    <li>Процессор останавливает выполнение текущей программы</li>
                    <li>Сохраняется контекст работы (значения регистров и указатель на следующую инструкцию)</li>
                    <li>Выполняется переход к обработчику прерывания, который находится в специальной таблице прерываний</li>
                    <li>Обработчик выполняет необходимые действия, такие как считывание символа с клавиатуры</li>
                    <li>После завершения обработки прерывания процессор восстанавливает сохраненный контекст</li>
                    <li>Процессор продолжает выполнение программы с того места, где было выполнено прерывание</li>
                </ol>
            </div>
            
            <div class="card-actions">
                <a href="lecture-10-answers.html" class="btn">Ответы на вопросы</a>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2023 Лекции по операционным системам</p>
    </footer>

    <script src="../js/script.js"></script>
</body>
</html>